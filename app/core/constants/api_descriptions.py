"""Константы summary/description для эндпойнтов OpenAPI."""

from __future__ import annotations


class ApiSummary:
    """Константы summary для эндпойнтов OpenAPI."""

    AUTH_LOGIN = "Вход по email/паролю"

    USERS_ME = "Получить профиль текущего пользователя"
    ADMIN_USERS_CREATE = "Создать пользователя (админ)"
    ADMIN_USERS_LIST = "Список пользователей (админ)"
    ADMIN_USERS_GET = "Получить пользователя по id (админ)"
    ADMIN_USERS_UPDATE = "Обновить пользователя (админ)"
    ADMIN_USERS_DELETE = "Удалить пользователя (админ)"

    ACCOUNTS_LIST_ABAC = "Список счетов пользователя (ABAC: владелец или админ)"
    ADMIN_CREATE_ACCOUNT = "Создать счет пользователю (админ)"

    PAYMENTS_LIST = "Список моих платежей"

    WEBHOOK_PAYMENT = "Обработать вебхук пополнения"

    HEALTH_APP = "Проверка доступности приложения"
    HEALTH_DB = "Проверка доступности подключения к БД"


class ApiDescription:
    """Константы description для эндпойнтов OpenAPI."""

    AUTH_LOGIN = "Аутентификация пользователя по email и паролю. Возвращает JWT токен."

    USERS_ME = "Вернуть данные текущего пользователя из контекста авторизации."
    ADMIN_USERS_CREATE = "Создать нового пользователя с указанными данными."
    ADMIN_USERS_LIST = "Получить список всех пользователей с пагинацией."
    ADMIN_USERS_GET = "Получить данные пользователя по идентификатору."
    ADMIN_USERS_UPDATE = "Обновить поля существующего пользователя."
    ADMIN_USERS_DELETE = "Удалить пользователя по идентификатору."

    ACCOUNTS_LIST_ABAC = (
        "Получить список счетов пользователя с политикой ABAC (сам владелец или админ)."
    )
    ADMIN_CREATE_ACCOUNT = "Создать счет для указанного пользователя."

    PAYMENTS_LIST = "Получить список платежей текущего пользователя с пагинацией."

    WEBHOOK_PAYMENT = (
        "Проверить подпись и обработать пополнение баланса.\n\n"
        "Алгоритм:\n"
        "1. Проверить подпись по формуле.\n"
        "2. Убедиться, что транзакция не существует (идемпотентность).\n"
        "3. Убедиться, что счет пользователя существует, при отсутствии — создать.\n"
        "4. Сохранить транзакцию и начислить сумму на счет.\n\n"
        "При попытке повторной обработки той же транзакции возвращается ошибка 409."
    )

    HEALTH_APP = "Базовая проверка доступности приложения и режима (debug)."
    HEALTH_DB = "Проверка подключения к БД простым запросом SELECT 1."
