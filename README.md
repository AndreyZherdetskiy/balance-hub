# BalanceHub ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Å—á–µ—Ç–∞–º–∏ –∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏

![Python](https://img.shields.io/badge/Python-3.10%2B-3776AB?logo=python&logoColor=white)
![FastAPI](https://img.shields.io/badge/FastAPI-green?logo=fastapi&logoColor=white)
![SQLAlchemy](https://img.shields.io/badge/SQLAlchemy-blue?logo=sqlalchemy&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-Compose-blue?logo=docker&logoColor=white)
![Poetry](https://img.shields.io/badge/Poetry-blueviolet?logo=poetry&logoColor=white)
![Coverage](https://img.shields.io/badge/Coverage-97.58%25-brightgreen)
![License](https://img.shields.io/badge/License-MIT-informational)

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π REST API** –Ω–∞ FastAPI –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–∞–¥–º–∏–Ω), —Å—á–µ—Ç–∞–º–∏ –∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏ (–ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è–º–∏). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–µ–≥–æ –≤–µ–±—Ö—É–∫–∞ –æ—Ç –≤–Ω–µ—à–Ω–µ–π –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ–¥–ø–∏—Å–∏ –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π.

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- üöÄ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** ‚Äî –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ async/await —Å SQLAlchemy 2.x
- üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π
- üìä **–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** ‚Äî 97.58% –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏, 364 —Ç–µ—Å—Ç–∞
- üê≥ **Docker-ready** ‚Äî –≥–æ—Ç–æ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å PostgreSQL 16
- üìù **–ê–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî OpenAPI/Swagger —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- üõ†Ô∏è **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** ‚Äî Make –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- üîß **–°–∫—Ä–∏–ø—Ç—ã** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –∏ —Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ö° **Performance —Ç–µ—Å—Ç—ã** ‚Äî —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã –∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ PostgreSQL

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-–ø—Ä–∏–Ω—Ü–∏–ø—ã)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ-api-–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–í–µ–±—Ö—É–∫](#–≤–µ–±—Ö—É–∫-–ø–æ–¥–ø–∏—Å—å-–∏-–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
- [–û–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–æ–∫—Ä—É–∂–µ–Ω–∏–µ-–∏-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–ú–∞—Ä—à—Ä—É—Ç—ã](#–º–∞—Ä—à—Ä—É—Ç—ã-–æ—Å–Ω–æ–≤–Ω—ã–µ)
- [–ú–∏–≥—Ä–∞—Ü–∏–∏](#–º–∏–≥—Ä–∞—Ü–∏–∏-alembic)
- [–°–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö](#—Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ-—Ç–µ—Å—Ç–æ–≤—ã—Ö-–¥–∞–Ω–Ω—ã—Ö)
- [–®–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥ Make](#—à–ø–∞—Ä–≥–∞–ª–∫–∞-–∫–æ–º–∞–Ω–¥-make)
- [–°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏](#—Å–∫—Ä–∏–ø—Ç—ã-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏)
- [–õ–∏–Ω—Ç–∏–Ω–≥ –∏ pre-commit](#–ª–∏–Ω—Ç–∏–Ω–≥-–∏-precommit)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [Performance –∏ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã](#performance-–∏-—Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#–ø—Ä–∏–º–µ—á–∞–Ω–∏—è-–ø–æ-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:** SOLID, DRY, KISS, REST, –û–û–ü, –µ–¥–∏–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ø–æ —Ñ–∞–π–ª–∞–º

**–°–ª–æ–∏ –∏ –∫–∞—Ç–∞–ª–æ–≥–∏:**
- `app/core` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –æ–±—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (DI)
- `app/db` ‚Äî –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è –±–∞–∑–∞ –∏ —Å–µ—Å—Å–∏–∏ (async SQLAlchemy 2.x)
- `app/models` ‚Äî ORM‚Äë–º–æ–¥–µ–ª–∏ (`User`, `Account`, `Payment`)
- `app/schemas` ‚Äî Pydantic v2 —Å—Ö–µ–º—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- `app/crud` ‚Äî –∫–ª–∞—Å—Å—ã CRUD –¥–ª—è –º–æ–¥–µ–ª–µ–π (–¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º)
- `app/api/routers` ‚Äî —Ç–æ–Ω–∫–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (–º–∞—Ä—à—Ä—É—Ç—ã API), —Ç–æ–ª—å–∫–æ DI/–≤–∞–ª–∏–¥–∞—Ü–∏—è/–≤—ã–∑–æ–≤—ã CRUD/—É—Ç–∏–ª–∏—Ç
- `app/services` ‚Äî —Å–ª–æ–∂–Ω–∞—è –ø—Ä–∏–∫–ª–∞–¥–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–Ω–∞–ø—Ä., –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–∞)
- `app/validators` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - `sync/` ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞/–¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
  - `async_/` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ë–î

```mermaid
flowchart TD
  %% –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  A[Client] -->|HTTP| B[FastAPI Routers]
  B --> C[Services]
  C --> D[CRUD Layer]
  D --> E[(PostgreSQL 16)]
  B --> F[Auth/JWT]
  C --> G[Alembic Migrations]
  C --> H[Validators]

  %% –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  I[Testing System] --> J[364 Tests - 97.58% Coverage]
  I --> K[Test Fixtures & Config]
  K --> L[conftest.py]
  L --> M[SQLite Fixtures]
  L --> N[PostgreSQL Fixtures]

  %% –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤
  J --> O[Unit Tests]
  J --> P[Integration Tests]
  J --> Q[Performance Tests]

  %% –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  O --> R[SQLite In-Memory]
  P --> R
  Q --> S[pytest-postgresql]
  Q --> T[11 Performance Tests]

  %% –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
  U[Make Commands] --> V[Local/Docker Workflows]
  W[Scripts] --> X[Auto-migrations & Seeding]

    %% –°—Ç–∏–ª–∏
  classDef app fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000000
  classDef test fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000000
  classDef db fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px,color:#000000
  classDef tool fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000000
  classDef http fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#ffffff

  class A,B,C,D,F,G,H app
  class I,J,K,L,M,N,O,P,Q,R,S,T test
  class E db
  class U,V,W,X tool
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

**–û—Å–Ω–æ–≤–Ω—ã–µ:**
- **FastAPI** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Pydantic v2** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º—ã
- **SQLAlchemy 2.x** ‚Äî async ORM —Å asyncpg
- **PostgreSQL 16** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **Alembic** ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- **JWT** (`python-jose`) ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **bcrypt** (`passlib`) ‚Äî —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

**–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
- **Poetry** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- **Ruff** ‚Äî –ª–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **pytest** ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (364 —Ç–µ—Å—Ç–∞, 97.58% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- **pytest-postgresql** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –ë–î
- **pytest-asyncio** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ async —Ç–µ—Å—Ç–æ–≤
- **pre-commit** ‚Äî git hooks

**üìã –ü–æ–ª–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** [`pyproject.toml`](pyproject.toml)

---

## –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ë–∞–∑–æ–≤—ã–π –ø—Ä–µ—Ñ–∏–∫—Å:** `/api/v1`
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** JWT Bearer —Ç–æ–∫–µ–Ω—ã
- **RBAC:** –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è `is_admin = true`
- **ABAC:** –ø–æ–ª–∏—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

---

## –í–µ–±—Ö—É–∫ (–ø–æ–¥–ø–∏—Å—å –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)

**–ü—É—Ç—å:** `POST /api/v1/webhook/payment`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "transaction_id": "5eae174f-7cd0-472c-bd36-35660f00132b",
  "user_id": 1,
  "account_id": 1,
  "amount": "100.00",
  "signature": "7b47e41efe..."
}
```

**–ü–æ–¥–ø–∏—Å—å:** SHA256 –æ—Ç –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∫–ª—é—á–µ–π –∏ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
`{account_id}{amount}{transaction_id}{user_id}{secret_key}`

**–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–µ —Ç–æ–≥–æ –∂–µ `transaction_id` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ 409 Conflict

---

## –û–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É):
1. **`ENV_FILE`** ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
2. **`.env.docker`** ‚Äî –¥–ª—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
3. **`.env.local`** ‚Äî –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
4. **`.env`** ‚Äî fallback (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

**–ü—Ä–∏–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤:**
- `.env.local.example` ‚Äî –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- `.env.docker.example` ‚Äî –¥–ª—è Docker –∑–∞–ø—É—Å–∫–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** `APP_NAME`, `ENV`, `DEBUG`, `CORS_ORIGINS`
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** `JWT_SECRET`, `JWT_ALGORITHM`, `JWT_EXPIRES_MINUTES`, `WEBHOOK_SECRET_KEY`
- **–ë–î:** `DB_ASYNC_DRIVER`, `DB_USER`, `DB_PASSWORD`, `DB_HOST`, `DB_PORT`, `DB_NAME`
- **–¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** `DEFAULT_USER_*`, `DEFAULT_ADMIN_*`

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Make –∫–æ–º–∞–Ω–¥—ã:**

#### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
make docker-up        # build + DB + –º–∏–≥—Ä–∞—Ü–∏–∏ + app
make docker-seed      # —Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
make docker-logs      # –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make docker-down      # –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```

#### –õ–æ–∫–∞–ª—å–Ω–æ
```bash
make local-up         # DB + –º–∏–≥—Ä–∞—Ü–∏–∏ + uvicorn --reload
make local-seed       # —Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
make local-logs-db    # –ª–æ–≥–∏ –ë–î
```

### üìñ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

#### –í–∞—Ä–∏–∞–Ω—Ç 1. Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
git clone git@github.com:AndreyZherdetskiy/balance-hub.git
cd balance-hub

# 2. –ó–∞–ø—É—Å–∫ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç .env.docker)
make docker-up

# 3. –°–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
make docker-seed

# 4. –û—Ç–∫—Ä—ã—Ç—å:
# API: http://localhost:8000
# Swagger: http://localhost:8000/docs
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2. –õ–æ–∫–∞–ª—å–Ω–æ
```bash
# 1. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
poetry install

# 2. –ó–∞–ø—É—Å–∫ –ë–î –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make local-up

# 3. –°–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
make local-seed
```

---

## –ú–∞—Ä—à—Ä—É—Ç—ã (–æ—Å–Ω–æ–≤–Ω—ã–µ)

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/v1/auth/login` ‚Äî –≤—Ö–æ–¥ –ø–æ email/password
  - **–¢–µ–ª–æ:** `{ "email": "user@example.com", "password": "Password123!" }`
  - **–û—Ç–≤–µ—Ç:** `{ "access_token": "<JWT>", "token_type": "bearer" }`

### üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–∞–¥–º–∏–Ω)
- `POST /api/v1/admin/users` ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/v1/admin/users?limit&offset` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/v1/admin/users/{user_id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PATCH /api/v1/admin/users/{user_id}` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /api/v1/admin/users/{user_id}` ‚Äî —É–¥–∞–ª–∏—Ç—å

### üí∞ –°—á–µ—Ç–∞
- `GET /api/v1/users/{user_id}/accounts?limit&offset` ‚Äî —Å–ø–∏—Å–æ–∫ —Å—á–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/admin/users/{user_id}/accounts` ‚Äî —Å–æ–∑–¥–∞—Ç—å —Å—á—ë—Ç (–∞–¥–º–∏–Ω)

### üí≥ –ü–ª–∞—Ç–µ–∂–∏
- `GET /api/v1/payments?limit&offset` ‚Äî —Å–ø–∏—Å–æ–∫ –º–æ–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π

### üîó –í–µ–±—Ö—É–∫
- `POST /api/v1/webhook/payment` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è

**–ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** Swagger UI `/docs` —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

---

## –ú–∏–≥—Ä–∞—Ü–∏–∏ (Alembic)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:**
```bash
make local-migrate-init    # –ª–æ–∫–∞–ª—å–Ω–æ
make docker-migrate-init   # –≤ Docker
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```bash
make local-migrate         # –ª–æ–∫–∞–ª—å–Ω–æ
make docker-migrate        # –≤ Docker
```

**–û—Ç–∫–∞—Ç:**
```bash
make local-migrate-down    # –ª–æ–∫–∞–ª—å–Ω–æ
make docker-migrate-down   # –≤ Docker
```

**üìù –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** –°–∫—Ä–∏–ø—Ç `scripts/create_init_migration.py` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–π.

---

## –°–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ:**
- –¢–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`DEFAULT_USER_*`)
- –°—á–µ—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`DEFAULT_ADMIN_*`)

**–ó–∞–ø—É—Å–∫:**
```bash
make local-seed      # –ª–æ–∫–∞–ª—å–Ω–æ
make docker-seed     # –≤ Docker
```

**üå± –°–∫—Ä–∏–ø—Ç:** `scripts/seed.py` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è.

---

## –®–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥ Make

### üè† –õ–æ–∫–∞–ª—å–Ω—ã–π workflow
| –ö–æ–º–∞–Ω–¥–∞                | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
|------------------------|---------------------------------------------|
| `make local-env`       | –°–æ–∑–¥–∞–Ω–∏–µ .env.local –∏–∑ –ø—Ä–∏–º–µ—Ä–∞             |
| `make local-db-up`     | –ó–∞–ø—É—Å–∫ PostgreSQL —á–µ—Ä–µ–∑ Docker             |
| `make local-wait-db`   | –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î                     |
| `make local-migrate-init` | –°–æ–∑–¥–∞–Ω–∏–µ init –º–∏–≥—Ä–∞—Ü–∏–∏                  |
| `make local-migrate`   | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π                        |
| `make local-up`        | –ü–æ–ª–Ω—ã–π workflow: –ë–î + –º–∏–≥—Ä–∞—Ü–∏–∏ + API      |
| `make local-seed`      | –°–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö                |
| `make local-logs-db`   | –õ–æ–≥–∏ PostgreSQL                            |

### üê≥ Docker workflow
| –ö–æ–º–∞–Ω–¥–∞                | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
|------------------------|---------------------------------------------|
| `make docker-env`      | –°–æ–∑–¥–∞–Ω–∏–µ .env.docker –∏–∑ –ø—Ä–∏–º–µ—Ä–∞            |
| `make docker-build`    | –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤                      |
| `make docker-db-up`    | –ó–∞–ø—É—Å–∫ PostgreSQL                          |
| `make docker-wait-db`  | –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î                     |
| `make docker-migrate-init` | –°–æ–∑–¥–∞–Ω–∏–µ init –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ    |
| `make docker-migrate`  | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –≤ Docker               |
| `make docker-up`       | –ü–æ–ª–Ω—ã–π workflow: —Å–±–æ—Ä–∫–∞ + –ë–î + –º–∏–≥—Ä–∞—Ü–∏–∏ + app |
| `make docker-seed`     | –°–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Docker                       |
| `make docker-logs-app` | –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                             |
| `make docker-logs-db`  | –õ–æ–≥–∏ PostgreSQL                            |
| `make docker-down`     | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤               |

### üîß –£—Ç–∏–ª–∏—Ç—ã
| –ö–æ–º–∞–Ω–¥–∞                | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
|------------------------|---------------------------------------------|
| `make help`            | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º                    |
| `make local-migrate-down` | –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π                          |
| `make docker-migrate-down` | –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π –≤ Docker                |

---

## –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

**`scripts/create_init_migration.py`**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç init –º–∏–≥—Ä–∞—Ü–∏—é —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω–æ, —Ç–∞–∫ –∏ –≤ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∏–º–ø–æ—Ä—Ç—ã
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö

**`scripts/seed.py`**
- –°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å—á–µ—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤

```bash
# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
python scripts/create_init_migration.py
python scripts/seed.py

# –ß–µ—Ä–µ–∑ Make –∫–æ–º–∞–Ω–¥—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
make local-up
make docker-up
make local-seed
make docker-seed
```

---

## –õ–∏–Ω—Ç–∏–Ω–≥ –∏ pre‚Äëcommit

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞:**
```bash
poetry run ruff check .          # –ª–∏–Ω—Ç–∏–Ω–≥
poetry run ruff format .         # —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
poetry run pre-commit run --all-files  # pre-commit hooks
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ hooks:**
```bash
poetry run pre-commit install
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- **`.pre-commit-config.yaml`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ pre-commit hooks
- **`pyproject.toml`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ruff –∏ pytest
- **Ruff** ‚Äî –µ–¥–∏–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ª–∏–Ω—Ç–∏–Ω–≥–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ pyproject.toml:**
- –î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: 99 —Å–∏–º–≤–æ–ª–æ–≤
- Docstrings: Google style
- –ö–∞–≤—ã—á–∫–∏: –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ
- Python: 3.10+

**Pre-commit hooks:**
- **Ruff linting** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- **Ruff formatting** ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** ‚Äî trailing whitespace, YAML –≤–∞–ª–∏–¥–∞—Ü–∏—è, merge conflicts

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- **364 —Ç–µ—Å—Ç–∞** ‚Äî –≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ ‚úÖ
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** 97.58% (–ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ç—Ä–µ–±—É–µ–º—ã–µ 90%)
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2 –º–∏–Ω—É—Ç—ã
- **–ú–æ–¥—É–ª–∏:** API, CRUD, Services, Models, Schemas, Validators

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:**
- **Unit —Ç–µ—Å—Ç—ã** –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –ø–æ–ª–Ω–æ–≥–æ flow (SQLite)
- **Performance —Ç–µ—Å—Ç—ã** PostgreSQL —Å pytest-postgresql
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** –∏ —Å—Ö–µ–º

**–§–∏–∫—Å—Ç—É—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- **`tests/conftest.py`** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
- **SQLite —Ñ–∏–∫—Å—Ç—É—Ä—ã** –¥–ª—è unit –∏ integration —Ç–µ—Å—Ç–æ–≤
- **PostgreSQL —Ñ–∏–∫—Å—Ç—É—Ä—ã** –¥–ª—è performance —Ç–µ—Å—Ç–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è** —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ –æ—á–∏—Å—Ç–∫—É –ë–î
- **–ú–∞—Ä–∫–µ—Ä—ã pytest** –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤

**–ó–∞–ø—É—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:**
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
poetry run pytest --tb=short -v

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã (SQLite)
poetry run pytest tests/ -k "not performance" -v

# –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
poetry run pytest tests/test_integration_full_flow.py -v

# –¢–æ–ª—å–∫–æ performance —Ç–µ—Å—Ç—ã (PostgreSQL)
poetry run pytest tests/test_performance.py -v
```

---

## Performance –∏ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã

**–ó–∞–ø—É—Å–∫ performance —Ç–µ—Å—Ç–æ–≤:**
```bash
# –í—Å–µ performance —Ç–µ—Å—Ç—ã
poetry run pytest tests/test_performance.py -m slow -v

# –¢–æ–ª—å–∫–æ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã
poetry run pytest tests/test_performance.py -m stress -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
poetry run pytest tests/test_performance.py::test_concurrent_webhook_requests_postgresql -v
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- **PostgreSQL –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ** ‚Äî –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** ‚Äî —Ç–µ—Å—Ç 100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±—Ö—É–∫–æ–≤
- **–ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ** ‚Äî —Ç–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è 50 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–¢–æ—á–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–π** ‚Äî —Ç–µ—Å—Ç –±–æ–ª—å—à–∏—Ö —Å—É–º–º –∏ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
- **–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã** ‚Äî –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- **–í–µ–±—Ö—É–∫–∏:** >3 –∑–∞–ø—Ä–æ—Å–∞/—Å–µ–∫ –¥–ª—è 100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** >0.8 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/—Å–µ–∫ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
- **–ü–ª–∞—Ç–µ–∂–∏:** >0.1 –ø–ª–∞—Ç–µ–∂–∞/—Å–µ–∫ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å—É–º–º
- **–ü—Ä–æ—Ñ–∏–ª–∏:** >10 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- **pytest-postgresql** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –ë–î
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã** ‚Äî `@pytest_asyncio.fixture` –¥–ª—è async —Ç–µ—Å—Ç–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è** ‚Äî –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è performance
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Alembic** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ë–î

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—á–∏—Å—Ç–∫–∞ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Alembic –∫ —Ç–µ—Å—Ç–æ–≤—ã–º –ë–î
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
- –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –∏ –æ—Ç–ª–∞–¥–∫–∞

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–û—Å–Ω–æ–≤–Ω—ã–µ:**
- `APP_NAME`, `ENV`, `DEBUG`
- `CORS_ORIGINS` ‚Äî —Å–ø–∏—Å–æ–∫ –∏–ª–∏ `*`
- `JWT_SECRET`, `JWT_ALGORITHM`, `JWT_EXPIRES_MINUTES`
- `WEBHOOK_SECRET_KEY` ‚Äî –∫–ª—é—á –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ –≤–µ–±—Ö—É–∫–∞

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- `DB_ASYNC_DRIVER`, `DB_USER`, `DB_PASSWORD`, `DB_HOST`, `DB_PORT`, `DB_NAME`
- –ò–ª–∏ –ø–æ–ª–Ω—ã–µ `DATABASE_URL`/`SYNC_DATABASE_URL`

**–¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
- `DEFAULT_USER_*`, `DEFAULT_ADMIN_*` ‚Äî –¥–ª—è —Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏—è –ë–î

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- **–°–µ–∫—Ä–µ—Ç—ã** —Ö—Ä–∞–Ω–∏—Ç—å –≤ `.env*` —Ñ–∞–π–ª–∞—Ö, –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å
- **–ü–∞—Ä–æ–ª–∏** —Ö—ç—à–∏—Ä—É—é—Ç—Å—è bcrypt —Å —Å–æ–ª—å—é
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö:
  - –°—Ö–µ–º—ã/–≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã: —Ñ–æ—Ä–º–∞—Ç, –¥–∏–∞–ø–∞–∑–æ–Ω—ã, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
  - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã: –±–∏–∑–Ω–µ—Å-–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —á–µ—Ä–µ–∑ DI
  - –ë–î: —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –∫–æ–Ω—Å—Ç—Ä–µ–π–Ω—Ç—ã
- **CORS** –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **JWT** —Ç–æ–∫–µ–Ω—ã —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è

- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API endpoints
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- CI/CD pipeline
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ performance —Ç–µ—Å—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Ç–µ—Å—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –ë–î –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –≤ CI/CD pipeline

---

## –ê–≤—Ç–æ—Ä—ã
- [Andrey Zherdetskiy](https://github.com/AndreyZherdetskiy)

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
